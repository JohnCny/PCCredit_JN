<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.cardpay.pccredit.manager.dao.ManagerPerformmanceDao">
    
  <resultMap id="ResultMap" type="com.cardpay.pccredit.manager.form.DeptMemberForm">
      <result property="id" column="ID" />
      <result property="oname" column="oname" />
      <result property="name" column="name" />
      <result property="display_name" column="display_name" />
      <result property="external_id" column="external_id" />
  </resultMap>
    
  <resultMap type="com.cardpay.pccredit.manager.model.ManagerPerformmance" id="managerperform">
       <result property="id" column="ID" />
       <result property="manager_id" column="manager_id" />
       <result property="visitcount" column="visitcount" />
       <result property="applycount" column="applycount" />
       <result property="applyrefuse" column="applyrefuse" />
       <result property="creditcount" column="creditcount" />
       <result property="creditrefuse" column="creditrefuse" />
       <result property="realycount" column="realycount" />
       <result property="reportcount" column="reportcount" />
       <result property="internalcount" column="internalcount" />
       <result property="meetingcout" column="meetingcout" />
       <result property="passcount" column="passcount" />
       <result property="signcount" column="signcount" />
       <result property="givemoneycount" column="givemoneycount" />
       <result property="crateday" column="crateday" />
  </resultMap>  
  <resultMap type="com.cardpay.pccredit.manager.model.ManagerPerformmanceSum" id="managerperformsum">
       <result property="id" column="ID" />
       <result property="manager_id_s" column="manager_id_s" />
       <result property="visitcount_s" column="visitcount_s" />
       <result property="applycount_s" column="applycount_s" />
       <result property="applyrefuse_s" column="applyrefuse_s" />
       <result property="creditcount_s" column="creditcount_s" />
       <result property="creditrefuse_s" column="creditrefuse_s" />
       <result property="realycount_s" column="realycount_s" />
       <result property="reportcount_s" column="reportcount_s" />
       <result property="internalcount_s" column="internalcount_s" />
       <result property="meetingcout_s" column="meetingcout_s" />
       <result property="passcount_s" column="passcount_s" />
       <result property="signcount_s" column="signcount_s" />
       <result property="givemoneycount_s" column="givemoneycount_s" />
       <result property="crateday_s" column="crateday_s" />
      
  </resultMap>  
<select id="findMumberByDeptId" resultMap="ResultMap">
   select o.name as oname ,d.name,t.* from sys_user t 
   left join sys_dept_user sd on t.id = sd.user_id 
   left join sys_department d on sd.dept_id = d.id 
   left join sys_organization o on d.org_id = o.id 
   where 1=1 and d.org_id=#{id}
</select>   
 
<select id="finManagerPerformmanceSumById" resultMap="managerperformsum">
   select * from MANAGER_PERFORMMANCE_SUM
   
   where 1=1 and manager_id_s=#{managerId}
</select>   
 
<select id="finManagerPerformmanceById" resultMap="managerperform">
   select * from MANAGER_PERFORMMANCE
   
   where 1=1 and manager_id=#{managerId}
</select>    
    
<update id="updateManagerPerformmanceSum">
  update manager_performmance_sum m set 
  m.visitcount_s = m.visitcount_s+#{visitcount_s},
  m.applycount_s = m.applycount_s+#{applycount_s},
  m.applyrefuse_s = m.applyrefuse_s+#{applyrefuse_s}, 
  m.creditcount_s = m.creditcount_s+#{creditcount_s}, 
  m.creditrefuse_s = m.creditrefuse_s+#{creditrefuse_s}, 
  m.realycount_s = m.realycount_s+#{realycount_s}, 
  m.reportcount_s = m.reportcount_s+#{reportcount_s}, 
  m.internalcount_s = m.internalcount_s+#{internalcount_s}, 
  m.meetingcout_s = m.meetingcout_s+#{meetingcout_s}, 
  m.passcount_s = m.passcount_s+#{passcount_s}, 
  m.signcount_s = m.signcount_s+#{signcount_s}, 
  m.givemoneycount_s = m.givemoneycount_s+#{givemoneycount_s}, 
  m.crateday_s =#{crateday_s} 
  where m.manager_id_s=#{manager_id_s}  
    
    

</update>  
    
    
    
    
    
    
    
</mapper>